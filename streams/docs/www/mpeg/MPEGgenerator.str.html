<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<TITLE>
MPEGgenerator.str.pre (Version 1.0)
</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="http://java.sun.com/j2se/1.4.2/docs/api/stylesheet.css" TITLE="Style">
</HEAD>
<BODY>
  <H2>
    File MPEGgenerator.str.pre<BR>
    <FONT SIZE="-1">Version 1.0</FONT>
  </H2>
  <HR>
  <P>This file contains functions that allow one to encode MPEG-2 compliant video. The code is based on the MPEG-2 specification (ISO/IEC 13818-2). The MPEG-2 encoder is a work in progress, although it works within a limited test range. Throughout the source code, citations are made in cases where an understanding of the code would be helped by looking at an outside source. The format I have chosen is (cite NUM#, LOOKUP_INFO). NUM=1 refers to ISO/IEC: 13818-2, and NUM=2 refers to the reference MPEG implementation written in C, available at [www.mpeg.org].</P>
  <HR>
  <P>
  <A NAME="field_summary"><!-- --></A>
  <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
      <TD COLSPAN=2><FONT SIZE="+2"><B>Component Summary</B></FONT></TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
      <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>int->bit</CODE></FONT>
      </TD>
      <TD><CODE><B><A HREF="#MPEGStreamGenerator">MPEGStreamGenerator</A></B></CODE>

        <BR>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performs variable length encoding on an MPEG-2 compliant bit stream in accordance with the IEEE MPEG-2 specification.
      </TD>
    </TR>
    <TR BGCOLOR="white" CLASS="TableRowColor">
      <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>bit->bit</CODE></FONT>
      </TD>
      <TD><CODE><B><A HREF="#BitAlignStartCodes">BitAlignStartCodes</A></B></CODE>

        <BR>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bit-aligns the start codes.
      </TD>
    </TR>
  </TABLE>
  <P>
  <A NAME="field_detail"><!-- --></A>
  <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
      <TD COLSPAN=1><FONT SIZE="+2"><B>Component Detail</B></FONT></TD>
    </TR>
  </TABLE>
  <A NAME="MPEGStreamGenerator"><!-- --></A>
  <H3>MPEGStreamGenerator</H3>
  <PRE>int->bit&nbsp;<B>MPEGStreamGenerator</B></PRE>
  <DL>
    <DD>Performs variable length encoding on an MPEG-2 compliant bit stream in accordance with the IEEE MPEG-2 specification.
    <P>
    <DL><DD>
    <DT><B>Input:</B><DD><CODE>&lt;int&gt;</CODE> - A series of macroblocks, motion vectors, and associated picture data
    <DT><B>Output:</B><DD><CODE>&lt;bit&gt;</CODE> - An MPEG-2 variable length encoded bitstream. The start codes are not aligned correctly: another filter is used to clean this up.    <DT><B>Parameters:</B>                      <DD><CODE>intra_quantiser_matrix</CODE> - The intra quantiser matrix to be used for quantization
                      <DD><CODE>non_intra_quantiser_matrix</CODE> - The non-intra quantiser matrix to be used for quantization
                      <DD><CODE>intra_dc_precision</CODE> - The intra dc precision to be used
                      <DD><CODE>q_scale_type</CODE> - The quantization scale type

    </DD></DL>
  </DD>
  </DL>
  <HR>
  <A NAME="BitAlignStartCodes"><!-- --></A>
  <H3>BitAlignStartCodes</H3>
  <PRE>bit->bit&nbsp;<B>BitAlignStartCodes</B>()</PRE>
  <DL>
    <DD>Bit-aligns the start codes. This should be part of the generator but to simplify the code has been moved out. Performance is slightly worse, but you wouldn't want to write the generator in StreamIt anyway.
    <P>
    <DL><DD>
    <DT><B>Input:</B><DD><CODE>&lt;bit&gt;</CODE> - An MPEG-2 encoded stream with non-aligned start codes
    <DT><B>Output:</B><DD><CODE>&lt;bit&gt;</CODE> - An MPEG-2 encoded stream with aligned start codes
    </DD></DL>
  </DD>
  </DL>
  <HR>
  Please contact the author (<a href="mailto:madrake@gmail.com">Matthew Drake</a>) for more information.
</BODY>
