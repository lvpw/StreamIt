%TGIF 3.0-p13
state(0,33,100.000,0,256,0,16,1,9,1,1,0,0,1,0,1,0,'Courier',0,10,0,0,0,10,1,0,1,1,0,16,0,0,1,1,1,0,1088,1408,0,0,2880).
%
% @(#)$Header: /afs/csail.mit.edu/group/commit/reps/projects/streamit/cvsroot/streams/docs/cc-02/fir-proc.obj,v 1.1 2002-01-21 18:42:16 thies Exp $
% %W%
%
unit("1 pixel/pixel").
color_info(11,65535,0,[
	"magenta", 65535, 0, 65535, 65535, 0, 65535, 1,
	"red", 65535, 0, 0, 65535, 0, 0, 1,
	"green", 0, 65535, 0, 0, 65535, 0, 1,
	"blue", 0, 0, 65535, 0, 0, 65535, 1,
	"yellow", 65535, 65535, 0, 65535, 65535, 0, 1,
	"pink", 65535, 49344, 52171, 65535, 49344, 52171, 1,
	"cyan", 0, 65535, 65535, 0, 65535, 65535, 1,
	"CadetBlue", 24415, 40606, 41120, 24415, 40606, 41120, 1,
	"white", 65535, 65535, 65535, 65535, 65535, 65535, 1,
	"black", 0, 0, 0, 0, 0, 0, 1,
	"DarkSlateGray", 12079, 20303, 20303, 12079, 20303, 20303, 1
]).
page(1,"",1).
text('black',112,352,'Courier',0,10,38,0,0,1,330,455,0,0,9,2,0,1,0,0,0,2,0,0,0,0,"",0,0,0,[
	"int N = 5;",
	"int BLOCK_SIZE = 100;",
	"",
	"void step(float[] input, float[] output,",
	"       int numIn, int numOut) {",
	"  float sum = 0;",
	"  for (int k=0; k<numIn; k++)",
	"    sum = sum + input[k]*FIR_COEFF[k+numIn][N];",
	"  for (int k=numIn; k<N; k++) ",
	"    sum = sum + input[k]*FIR_COEFF[k-numIn][N];",
	"  output[numOut] = sum;",
	"  input[numIn] = getData();",
	"}",
	"",
	"void main() {",
	"  float input[] = new float[N];",
	"  float output[] = new float[BLOCK_SIZE];",
	"  int numIn, numOut;",
	"",
	"  for (numIn=0; numIn<N; numIn++)",
	"    input[numIn] = getData();",
	" ",
	"  while (true) {",
	"",
	"    for (out=0; numIn<N; numIn++, numOut++)",
	"      step(input, output, numIn, numOut);",
	"",
	"    int wholeSteps = (BLOCK_SIZE-numOut)/N;",
	"    for (int k=0; k<wholeSteps; k++)",
	"      for (numIn=0; numIn<N; numIn++, numOut++)",
	"        step(input, output, numIn, numOut);",
	"",
	"    for (numIn=0; numOut<BLOCK_SIZE; numIn++, numOut++)",
	"      step(input, output, numIn, numOut);",
	"",
	"    displayBlock(output);",
	"  }",
	"}"]).
