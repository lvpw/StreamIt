%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% This file defines the ``csailabstractbook'' document class, used to build% the lab's annual book of research abstracts.% Change Log:%% 2001/7/22 v1.0 <matsakis@ai>% 2001/9/05 v1.1 <matsakis@ai>%  Changes:%    added "cbcl" option to abstitle command%    now includes "subfigure" package  % 2001/9/10 v1.2 <matsakis@ai>%  Changes:%    abstitle now puts the abstract on a fresh odd-numbered page%    long titles and author lists now wrap properly%    table of contents entries won't be split across pages%    page numbers in the frontmatter are now in the page foot%    now displays cbcl info in individual mode where appropriate% 2001/9/27 v1.22 <matsakis@ai>%  Changes:%    added pictex package%    improved formatting for authors in TOC%    improved formatting for titles in TOC%    added index to TOC% 2002/9/30 v1.23 <matsakis@ai>%  Changes:%    set initial page number to 1  %    reset footnotes at the beginning of every abstract
% 2004/1/04 v1.24 <annika@csail>
%  Changes:
%    edited to reflect csail not ai lab
%    changed graphicx and geometry package from dvips% Known Issues:%  Long titles may be hyphenated in individual mode \NeedsTeXFormat{LaTeX2e}\ProvidesClass{csailabstractbook}[2001/9/27 v1.23 (N. Matsakis <matsakis@ai>)]\LoadClass{book}  %% defaults in effect: 10pt, letterpaper, final\RequirePackage{palatino}\RequirePackage{ifthen}\RequirePackage{makeidx}%\RequirePackage[dvips]{geometry}%\RequirePackage[dvips,final]{graphicx}
\RequirePackage{geometry}\RequirePackage{graphicx}\RequirePackage{subfigure}\RequirePackage{pictex}\RequirePackage{placeins}%% chapterbib is the magic which allows us to include multiple%% bibliographies in the book.  The sectionbib command makes the%% bibliographies logical sections, inheriting section formatting,%% but sets their numbering depth to subsection, so they don't appear%% in the table of contents.\RequirePackage{chapterbib}\sectionbib{\section*}{subsection}  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Class Options --- This document class runs in one of three modes,%% specified by a class option. The \@mode command is an internal switch%% to specify the mode.%% %% The "final" option is for processing the complete book, with table of%% contents, index, and so forth. This mode specifies margins and page%% numbering styles appropriate for a book.%%%% The "draft" option is the default, used to test out an abstract before%% submission. This mode produces a document with just the pages of the%% abstract, using the same formatting as the "final" mode.%% %% The "individual" mode produces a single abstract with a different%% title format and symmetric margins, suitable for web publication.\newcommand*{\@mode}{draft} % specifies the default\DeclareOption{final}{\renewcommand*{\@mode}{final}}\DeclareOption{draft}{\renewcommand*{\@mode}{draft}}\DeclareOption{individual}{\renewcommand*{\@mode}{individual}}\ProcessOptions\newcommand*{\finalmode}{\equal{\@mode}{final}}\newcommand*{\draftmode}{\equal{\@mode}{draft}}\newcommand*{\individualmode}{\equal{\@mode}{individual}}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% General Formatting Commands --- The following commands specify the page%% formatting for each mode, as well as a few miscellaneous commands.\setcounter{tocdepth}{1} \setcounter{secnumdepth}{-1}\setlength{\parskip}{0.9ex plus 0.1ex minus 0ex}\renewcommand*{\bibname}{References:}\ifthenelse{\finalmode}{\makeindex}{}\pagestyle{plain} % this gets changed later if \finalmode or \draftmode\geometry{letterpaper}\ifthenelse{\finalmode \or \draftmode}{%  \geometry{nofoot,top=0.35in,bottom=0.75in}  \geometry{textwidth=6.30in,twosideshift=0.20in}}{  \geometry{nohead,textwidth=7.0in,twosideshift=0in,margin=0.75in}}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Section Formatting Commands --- The final book is sectioned according%% to general topic (learning, vision, etc.) by the \abschapter command,%% with each topic containing a number of abstracts.  The built in%% sectioning commands are largely ignored, and the table of contents%% entries are entered "manually".  The exception is that the sections of%% an abstract itself are standard latex "sections", with the formatting%% redefined below.  The reason for this is that chapterbib inherits its%% bibliography header formatting from the standard latex section.%% The single argument is the chapter heading\newcommand*{\abschapter}[1]{ %  \addtocontents{toc}{\ \protect\\{\large\bfseries #1}\protect\nopagebreak}  \cleardoublepage\thispagestyle{empty}  \vspace*{3in}\centerline{\LARGE\bfseries #1}\vfill  \clearpage\thispagestyle{empty}\ \clearpage }%% The first argument is the abstract name, the second the authors'.%% In draft or individual mode, we need to begin a ``cbunit'' %% bibliography, to get things to work right.  This formatting is%% pretty ugly, but what can you do?\ifthenelse{\finalmode \or \draftmode}{\newcommand*{\abstitle}[3][csail]{ %  \cleardoublepage  \setcounter{footnote}{0}  \ifthenelse{\equal{#1}{csail}}{ %    \markright{\small MIT Computer Science and Artificial Intelligence Laboratory,                September \number\year}    }{    \markright{\small MIT CSAIL/Center for Biological and                Computational Learning, September \number\year}   }  \addcontentsline{toc}{section}{#2}  \addtocontents{toc}{\protect\nopagebreak\hspace{0.5cm}\protect\parbox{5in}{\itshape #3}\protect\\}  \setcounter{figure}{0}  \ifthenelse{\finalmode}{}{\begin{cbunit}}  \vspace*{-0.1in}  \begin{center}{\large\bfseries #2}\end{center}  \vspace*{0in}  \begin{center} #3 \end{center}  \vspace*{0.05in}}}{% otherwise we're in \individualmode\newcommand*{\abstitle}[3][csail]{ %  \setcounter{figure}{0}  \begin{cbunit}  \noindent\parbox[t]{5.5in}{ %    {\Large\bfseries #2}    \vspace*{0.5in}    \noindent #3 \newline    \ifthenelse{\equal{#1}{csail}}{ %      \noindent Computer Science and Artificial Intelligence Laboratory \newline    }{ %      \noindent Computer Science and Artificial Intelligence Laboratory and \newline      The Center for Biological and Computational Learning \newline    }    Massachusetts Institute of Technology \newline    Cambridge, Massachusetts 02139 \newline    \noindent http://www.csail.mit.edu  }  \hfill  \raisebox{-1.75in}{\includegraphics[height=2in]{csaillogo}}%  \includegraphics[height=2in]{csaillogo}  \vspace*{0.1in}}}%% Subsection commands\renewcommand{\section}{%  \@startsection{section}{0}{0pt}{0pt}{-1em}{\bfseries}}\newcommand*{\absection}[1]{\section*{#1:}}%% Bibliography command\newcommand*{\absbibliography}[1]{%  \FloatBarrier  \vspace*{\parskip}  \bibliographystyle{plain}  \bibliography{#1}  \ifthenelse{\finalmode}{}{\end{cbunit}}}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Special formatting commands go here\newcommand*{\makecover}{  \thispagestyle{empty}  \setcounter{page}{1}  \vspace*{2.0cm}  \centerline{\Large MIT Computer Science and Artificial Intelligence Laboratory}  \vspace{2.0cm}  \centerline{\Huge\bfseries Research Abstracts}  \vspace{2.5cm}  \centerline{\Large http://www.csail.mit.edu}  \vspace{2.5cm}  \centerline{\large September, \number\year}  \vfill  \centerline{\copyright\ MIT Computer Science and Artificial Intelligence Laboratory}  \cleardoublepage}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% In final mode...\ifthenelse{\finalmode}{ %\AtBeginDocument{  \typeout{*** csailabstractbook operating in final mode ***}  \makecover  %%%%% include the introduction  \frontmatter  \InputIfFileExists{introduction}{}{    \typeout{****************************************************************}    \typeout{WARNING: Could not find file introduction.tex  -- Continuing... }    \typeout{****************************************************************}  }  %%%%% make the table of contents  \cleardoublepage  \setlength{\footskip}{1cm}  \tableofcontents  \setlength{\footskip}{0cm}  \mainmatter  \pagestyle{myheadings}}\AtEndDocument{  \backmatter  \setlength{\footskip}{1cm}  \pagestyle{plain}  \addcontentsline{toc}{section}{\large\bfseries Index}  \printindex}}{}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% In draft mode...%\ifthenelse{\draftmode}{ %\AtBeginDocument{  \typeout{*** csailabstractbook operating in draft mode ***}  \mainmatter  \pagestyle{myheadings}  }\AtEndDocument{  \ifthenelse{\value{page} > 2}{    \typeout{*****************************************************************}    \typeout{WARNING: This abstract is too long.  Abstracts must be two pages.}    \typeout{*****************************************************************}  }{}}}{}%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% In individual mode...%\ifthenelse{\individualmode}{ %\AtBeginDocument{  \typeout{*** csailabstractbook operating in individual mode ***}  \mainmatter}}{}