
void->void pipeline NullSplitter {
    add void->int splitjoin {
	split roundrobin(0);
	add straight();
	add reverse();
	join roundrobin();
    }
    add int->void filter {
	work pop 1 {
	    println(pop());
	}
    }
}

void->int stateful filter straight {
   int x = 0;	  

    work push 1 {
	push(x);
	x += 2;
    }
}

void->int stateful filter reverse {
  int x = 1;
    work push 1 {
	push(x);
	x += 2;
    }
}
