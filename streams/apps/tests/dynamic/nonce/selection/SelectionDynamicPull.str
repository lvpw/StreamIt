void->void pipeline SelectionDynamicPull {
    add FileReader<float>("./floats.in");
    add Select();  
    add Dummy();
    add Process();
    add FileWriter<float>("select.out");
}

float->float filter Select() {
    work pop * push 1 {
        while (peek(0) > 1) {
          pop();
        }
        float x = pop();        
        push(x);
    }
}


float->float filter Dummy() {
    work pop 1 push 1 {     
      push(pop());
    }
}

float->float filter Process() {
    work pop 1 push 1 {
     float x = pop();
     int i;
     for (i = 0; i < 10000; i++) {
        x += i * 3.0 + 1.0;
      }
      push(x);
    }
}

