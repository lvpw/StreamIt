
void->int stateful filter Source {
  int count;
  init {
     count = 0;
  }
  work push 1 {
    push(count++);
  }
}

int->int filter F {
   work pop * push * {
     push(pop());
   }
}

void->void pipeline test2 {
    add Source();
    add F();
    add F();
    add Writer<int>(stdout);
}

